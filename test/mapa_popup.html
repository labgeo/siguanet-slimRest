<!DOCTYPE html><html><head>	<title>SIGUAPI GeoJSON</title>	<meta charset="utf-8" />	<meta name="viewport" content="width=device-width, initial-scale=1.0">	<link rel="stylesheet" href="default.css" />	<link rel="stylesheet" href="leaflet/leaflet.css" />	<!--[if lte IE 8]><link rel="stylesheet" href="../dist/leaflet.ie.css" /><![endif]-->	<style>	#geojson-input {		 display: block;		 width: 400px;		 height: 290px;		 padding: 8px;		 border: 1px solid #cccccc;		 line-height: 130%;		 font-size: 13px;	}		</style></head><body>	<div id="map" style="width: 600px; height: 400px"></div>		<script src="leaflet/leaflet.js"></script>	<script type="text/javascript" src="jquery.min.js"></script>      	<script>		var map = L.map('map').setView([38.38442,-0.5152], 15);		L.tileLayer('http://{s}.tile.cloudmade.com/{key}/22677/256/{z}/{x}/{y}.png', {			//attribution: 'Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2012 CloudMade',			key: 'BC9A493B41014CAABB98F0471D759707'		}).addTo(map);		function onEachFeature(feature, layer) {			// does this feature have a property named popupContent?			var popupContent = "<p><table><tr><th colspan=2 align='center'>"+ feature.properties.codigoestancia +"</th></tr>"+				"<tr><td>Edificio</td><td>"+ feature.properties.edificio +"</td></tr>"+				"<tr><td>Planta</td><td>"+feature.properties.planta +"</td></tr>"+				"<tr><td>Denominacion</td><td>"+ feature.properties.denominacionestancia +"</td></tr>"+				"<tr><td>Superficie</td><td>"+ feature.properties.superficie_m2 +" mÂ²</td></tr>"+				"<tr><td>Dpto/Unidad estancia</td><td>"+ feature.properties.nombredptoestancia+"</td></tr>"+				"<tr><td>Uso</td><td>"+ feature.properties.descripcionactividadestancia+"</td></tr>"+				"<tr><td>Ocupantes</td><td>"+feature.properties.ocupantes +"</td></tr></table>";			if (feature.properties && feature.properties.popupContent) {				popupContent += feature.properties.popupContent;			}			layer.bindPopup(popupContent);		}$(document).ready(function() {	$("#target").click(function() {				var codigo = document.getElementById('codigo').value;		if (codigo == null) {			$('div#resultadoDiv').html('Sin codigo');		} else {						var rootURL = "../restGis.php/estancias/estancia/geojsonfull/"+codigo; 				$.getJSON(rootURL,{} ,function(data) {								var myGeoJSONLayer = L.geoJson().addTo(map);				myGeoJSONLayer.addData(data);				var bounds = myGeoJSONLayer.getBounds();				map.fitBounds(bounds);				var msg = JSON.stringify(data);				$('textarea#geojson-input').html(msg);  				// attributes								L.geoJson(data, {					onEachFeature: onEachFeature				}).addTo(map);                          });         }    	 	});	 }) 	</script>	<div style="position: fixed; top: 0px; right: 0px; width: 500px; height: 500px;">		<p>GEOMETRIA ESTANCIA </p>			CODIGO  : <input type="text" name="codigo" id="codigo" size="10" value="0001P1019" />			<div id="target"><input type='button'value='Buscar'/></div>			<div id="resultadoDiv"></div>		<textarea id="geojson-input" placeholder="Aqui aparece el GeoJSON"></textarea><br/>	</div><p>Busca la estancia y haz clic sobre ella para que aparezca el popup.</p></body></html>